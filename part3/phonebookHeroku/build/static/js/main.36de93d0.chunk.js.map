{"version":3,"sources":["components/button.js","components/person.js","components/filter.js","components/addPerson.js","services/persons.js","components/notification.js","App.js","index.js"],"names":["Button","text","id","handleDelete","onClick","Person","persons","removeNumber","map","person","key","name","number","Filter","search","onChange","PersonForm","submitPerson","addName","addNumber","onSubmit","value","type","baseUrl","axios","get","then","response","data","newObject","post","put","delete","resp","Notification","message","error","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","errorMessage","setErrorMessage","notificationMessage","setnotificationMessage","useEffect","personsService","event","personCopy","slice","target","nameFiltered","filteredPersons","filter","toLowerCase","startsWith","preventDefault","personObject","length","includes","personToChange","find","changedData","setTimeout","window","confirm","catch","concat","console","log","JSON","stringify","nameToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.36de93d0.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Button=({text,id,handleDelete})=>{\r\n \r\n    return(<button  onClick={()=>handleDelete(id)}>{text}</button>)\r\n};\r\nexport default Button;","import React from 'react'\r\nimport Button from './button'\r\n\r\nconst Person = ({ persons,removeNumber}) =>persons.map(person=> <p key={person.id}>{person.name} {person.number} <Button text={'delete'} id={person.id} handleDelete={removeNumber}/></p>)\r\n\r\nexport default Person","import React from 'react'\r\nconst Filter=({search})=>{\r\n    \r\n  return( <div>\r\n        filter shown with : <input  onChange={search}/>\r\n       </div>\r\n         )\r\n}\r\n\r\nexport default Filter\r\n       ","import React from 'react'\r\nconst PersonForm=({name,number,submitPerson,addName,addNumber})=>{\r\n\r\n  return( \r\n      <form onSubmit={submitPerson}>\r\n        <div>\r\n          name: <input value={name}  onChange={addName}/>\r\n        </div>\r\n       <div>\r\n       number: <input value={number} onChange={addNumber}/>\r\n      </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n        )\r\n}\r\nexport default PersonForm ","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst remove=(id)=>{\r\n    const request=axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(resp=>resp.data)\r\n}\r\nexport default { getAll, create, update,remove }","import React from 'react'\r\n\r\nconst Notification = ({ message,error }) => {\r\n  if (message === null && error!==null) {\r\n    return (\r\n        <div className=\"error\">\r\n       {error}\r\n       </div>\r\n    )\r\n  }else if(message !== null && error===null){\r\n      return (\r\n    <div className=\"notification\">\r\n      {message}\r\n    </div>\r\n  )\r\n  }else{\r\n    return (null)\r\n}\r\n}\r\n\r\nexport default Notification","import React, { useState,useEffect } from 'react'\r\nimport Person from './components/person';\r\nimport Filter from './components/filter';\r\nimport PersonForm from './components/addPerson';\r\nimport personsService from './services/persons';\r\nimport Notification from './components/notification';\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [newNumber,setNewNumber]=useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [notificationMessage, setnotificationMessage] = useState(null)\r\n  \r\n  useEffect(()=>{\r\n     personsService\r\n     .getAll()\r\n     .then(resp=>{\r\n         setPersons(resp)\r\n     })\r\n      \r\n  },[]);\r\n   \r\n //add new name and number \r\n const handleNameChange=(event)=>{\r\n   \r\n    setNewName(event.target.value);\r\n }\r\n const handleNumberChange=(event)=>{\r\n     setNewNumber(event.target.value);\r\n }\r\n \r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n   const personObject = {\r\n    name: newName,\r\n    number:newNumber,\r\n    id:persons.length+1\r\n  }\r\n     if(persons.map(person=>person.name).includes(newName)){\r\n         let personToChange=persons.find(person=>person.name===newName),\r\n             id=personToChange.id,\r\n             changedData={...personToChange,number:newNumber};\r\n        // console.log(personToChange, id)\r\n        if(personToChange.number===newNumber){\r\n            setErrorMessage(\r\n              `${newName} is already added to phonebook`\r\n            )\r\n            \r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n              \r\n            }, 5000)\r\n            \r\n        }else{\r\n            let approve=window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`);\r\n            \r\n            if(approve){\r\n              personsService\r\n             .update(id,changedData)\r\n             .then(resp=>{\r\n\t\t\t\t \r\n                 setPersons(persons.map(person=>person.id!==id ? person: resp))\r\n                  setnotificationMessage(\r\n                  `Changed ${personToChange.name}'s number`\r\n                )\r\n                setTimeout(() => {\r\n                  setnotificationMessage(null)\r\n                }, 5000)\r\n\r\n             })\r\n            .catch(error=>{\r\n             setErrorMessage(\r\n              `Information of ${personToChange.name} was already removed from server`\r\n            )\r\n            \r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n              \r\n            }, 5000)\r\n            setPersons(persons.filter(person=>person.id!==id ));\r\n             });\r\n            }\r\n        } \r\n            \r\n       \r\n     }else{\r\n         personsService\r\n         .create(personObject)\r\n         .then(response=>{\r\n\t\t\t \r\n             setPersons(persons.concat(response))\r\n              setnotificationMessage(\r\n                  `Added ${newName} to the phonebook`\r\n                )\r\n                setTimeout(() => {\r\n                  setnotificationMessage(null)\r\n                }, 5000)\r\n         }).catch(error=>{\r\n\t\t\t console.log(JSON.stringify(error.response))\r\n\t\t\t console.log(error.response.data)\r\n\t\t\t setErrorMessage(`Make sure 'name' has 3 or more characters and 'number' has 8 or more digits.`)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n              \r\n            }, 5000)\r\n\t\t });\r\n     }\r\n       \r\n      setNewName('')\r\n      setNewNumber('') \r\n  }\r\n  \r\n  \r\n \r\n const handleDelete=(id)=>{\r\n     //alert(JSON.stringify(persons.filter(person=>person.id===id)))\r\n     let nameToDelete=persons.filter(person=>person.id===id)[0].name,\r\n         approve=window.confirm(`Are you sure about deleting ${nameToDelete} ?`);\r\n     if(approve){\r\n         personsService\r\n         .remove(id)\r\n         .then(resp=>{\r\n             setPersons(persons.filter(person=>person.id!==id))\r\n             \r\n         })\r\n        \r\n     }\r\n   \r\n }\r\n \r\n const handleNameSearch=(event)=>{\r\n     //console.log(event.target.value)\r\n    // alert(event.target.value==='')\r\n     let personCopy=persons.slice();\r\n     if(event.target.value===''){\r\n          personsService\r\n         .getAll()\r\n         .then(resp=>{\r\n             setPersons(resp)\r\n         })\r\n     }else{\r\n         let nameFiltered= event.target.value;\r\n         let filteredPersons=personCopy.filter(person=>person.name.toLowerCase().startsWith(nameFiltered.toLowerCase()))\r\n         setPersons(filteredPersons);\r\n         \r\n     }\r\n }\r\n    \r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n       <Notification message={notificationMessage} error={errorMessage}/>\r\n       <Filter search={handleNameSearch}/>\r\n      <h2>add a new </h2>\r\n      <PersonForm submitPerson={addPerson} addName={handleNameChange} addNumber={handleNumberChange} name={newName} number={newNumber}/>\r\n      <h2>Numbers</h2>\r\n       <Person persons={persons} removeNumber={handleDelete}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}